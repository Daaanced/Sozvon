## "–§—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—á–µ–≥–æ MVP:"

## 1. **–°–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**

–§—É–Ω–∫—Ü–∏–∏:

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

- –ø—Ä–∏–Ω–∏–º–∞–µ—Ç **–ª–æ–≥–∏–Ω**, **–ø–∞—Ä–æ–ª—å**, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ email
    
- –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ª–æ–≥–∏–Ω–∞
    
- —Ö—ç—à–∏—Ä—É–µ—Ç –ø–∞—Ä–æ–ª—å (bcrypt/argon2)
    
- —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ –±–∞–∑–µ
    

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–ª–æ–≥–∏–Ω)

- –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å
    
- —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ö—ç—à
    
- –≤—ã–¥–∞—ë—Ç **JWT** –∏–ª–∏ session token
    

–í—ã–¥–∞—á–∞ UID

–ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä:

- `UUIDv4` –∏–ª–∏ `snowflake`, –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç ID

_UID –Ω—É–∂–µ–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∏ –¥–ª—è –≤—ã–∑–æ–≤–æ–≤._


## 2.  **–°–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π / —Å–ø–∏—Å–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤**

### –§—É–Ω–∫—Ü–∏–∏:

### ‚úî –ü–æ–∏—Å–∫ –ø–æ –ª–æ–≥–∏–Ω—É –∏–ª–∏ UID

–ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç—Ä–æ–∫—É, —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

- UID
    
- –ª–æ–≥–∏–Ω
    
- —Å—Ç–∞—Ç—É—Å (online/offline)
    

### ‚úî –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ç–≤–æ–π UX –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç ¬´–¥–æ–±–∞–≤–∏—Ç—å –≤ –¥—Ä—É–∑—å—è¬ª:

- –æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏
    
- –ø—Ä–∏–Ω—è—Ç–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
    
- —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
    

–ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å.

## 3. **–°–µ—Ä–≤–µ—Ä –æ–±–º–µ–Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏**

–≠—Ç–æ –ø—Ä–æ—Å—Ç–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç.

–§—É–Ω–∫—Ü–∏–∏:

WebSocket-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

–ö–∞–∂–¥—ã–π –∫–ª–∏–µ–Ω—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç WS-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞.

–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

–°–µ—Ä–≤–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç:

- –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
    
- –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω
    
- –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –æ–Ω–ª–∞–π–Ω –ª–∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å
    
- –µ—Å–ª–∏ –æ–Ω–ª–∞–π–Ω ‚Üí –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –ø–æ –µ–≥–æ WebSocket
    
- –µ—Å–ª–∏ –æ—Ñ—Ñ–ª–∞–π–Ω ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –±–∞–∑—É
    

### ‚úî –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

–ü—Ä–æ—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞:

- sender_id
    
- receiver_id
    
- timestamp
    
- text
    

---

## 4. **–°–µ—Ä–≤–µ—Ä —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è WebRTC –∑–≤–æ–Ω–∫–æ–≤**

–°–µ—Ä–≤–µ—Ä **–ù–ï –ø–µ—Ä–µ–¥–∞—ë—Ç –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ**, —ç—Ç–æ –¥–µ–ª–∞–µ—Ç P2P WebRTC.  
–ù–æ —Å–µ—Ä–≤–µ—Ä –æ–±—è–∑–∞–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å ¬´–¥–µ—Ä–∂–∞—Ç–µ–ª—å –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤¬ª.

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ WebSocket —Å–µ—Å—Å–∏–∏ (—Ç–∞ –∂–µ, —á—Ç–æ –¥–ª—è —á–∞—Ç–∞)

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω WebSocket –¥–ª—è:

- —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
    
- —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–≤–æ–Ω–∫–∞—Ö
    
- —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ WebRTC
    

 –ü–µ—Ä–µ–¥–∞—á–∞ —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:

- `offer`
    
- `answer`
    
- `ICE candidates`
    

–°–µ—Ä–≤–µ—Ä –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç JSON –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –ê ‚Üí –∫ –∫–ª–∏–µ–Ω—Ç—É B.

## 5. **STUN —Å–µ—Ä–≤–µ—Ä**

–ß—Ç–æ–±—ã WebRTC –º–æ–≥ —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ NAT.

–í–∞—Ä–∏–∞–Ω—Ç—ã:

- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π: `stun:stun.l.google.com:19302`
    
- –ø–æ–¥–Ω—è—Ç—å —Å–≤–æ–π (Pion STUN / Coturn)
    

–ù–∞ —ç—Ç–∞–ø–µ MVP –º–æ–∂–Ω–æ _**–≤–æ–æ–±—â–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–≤–æ–π STUN**_.

## 6. **TURN —Å–µ—Ä–≤–µ—Ä (—Ç–æ–ª—å–∫–æ –¥–ª—è –ø–ª–æ—Ö–∏—Ö —Å–µ—Ç–µ–π)**

TURN ‚Äî –¥–æ—Ä–æ–≥–æ–π –ø–æ —Ç—Ä–∞—Ñ–∏–∫—É, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç –≤–µ—Å—å –º–µ–¥–∏–∞–ø–æ—Ç–æ–∫.  
–î–ª—è –Ω–∞—á–∞–ª–∞ –º–æ–∂–Ω–æ –Ω–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å, –Ω–æ –¥–ª—è –±—É–¥—É—â–µ–≥–æ –Ω—É–∂–µ–Ω.

–õ—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ: Coturn.

## 7. **–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (presence)**

–°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å:

- –∫—Ç–æ —Å–µ–π—á–∞—Å –æ–Ω–ª–∞–π–Ω
    
- –∫–æ–º—É –º–æ–∂–Ω–æ –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –∑–≤–æ–Ω–æ–∫
    
- –∫–æ–º—É –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å WS-—Å–æ–æ–±—â–µ–Ω–∏–µ
    

–ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –≤—Ö–æ–¥–∏—Ç:

- –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç WS
    
- —Å–µ—Ä–≤–µ—Ä –ø–æ–º–µ—á–∞–µ—Ç –µ–≥–æ online
    

–ö–æ–≥–¥–∞ –≤—ã—Ö–æ–¥–∏—Ç:

- –∑–∞–∫—Ä—ã–≤–∞–µ—Ç WS
    
- —Å–µ—Ä–≤–µ—Ä –ø–æ–º–µ—á–∞–µ—Ç offline

# –ë–æ–ª–µ–µ –∫—Ä–∞—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è
### üîπ **1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:**

- —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å ‚Üí DB)
    
- –ª–æ–≥–∏–Ω (JWT –≤—ã–¥–∞—á–∞)
### üîπ **2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**

- –ø–æ–∏—Å–∫ –ø–æ –ª–æ–≥–∏–Ω—É
    
- –ø–æ–∏—Å–∫ –ø–æ UID
    
- –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
    
- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–∞–∫—Ç—ã
### üîπ **3. WebSocket —Å–µ—Ä–≤–µ—Ä:**

- —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
    
- –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–Ω–ª–∞–π–Ω-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
    
- —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ñ—Ñ–ª–∞–π–Ω-—Å–æ–æ–±—â–µ–Ω–∏–π
### üîπ **4. WebRTC —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è:**

- –ø–µ—Ä–µ—Å—ã–ª–∫–∞ offer
    
- –ø–µ—Ä–µ—Å—ã–ª–∫–∞ answer
    
- –ø–µ—Ä–µ—Å—ã–ª–∫–∞ ICE candidates
    
- –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π ¬´–≤—Ö–æ–¥—è—â–∏–π –≤—ã–∑–æ–≤¬ª
### üîπ **5. STUN / TURN (–ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏):**

- STUN –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π
    
- TURN —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ–∑–∂–µ

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ (–∫–æ—Ä–æ—Ç–∫–∞—è —Å—Ö–µ–º–∞)
 
1. –ö–ª–∏–µ–Ω—Ç –ê —Ö–æ—á–µ—Ç –∑–≤–æ–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é B
    
2. –ö–ª–∏–µ–Ω—Ç –ê –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç WebSocket-—Å–æ–æ–±—â–µ–Ω–∏–µ:  
    `{type: "call_request", to: B}`
    
3. –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç B
    
4. B –æ—Ç–≤–µ—á–∞–µ—Ç
    
5. –ê –∏ B –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è offer/answer —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä
    
6. –ê –∏ B –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è ICE-–∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º–∏
    
7. –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ WebRTC —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ‚Üí P2P –ø–æ—Ç–æ–∫ –Ω–∞—á–∞–ª—Å—è
    

–°–µ—Ä–≤–µ—Ä –±–æ–ª—å—à–µ –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç.